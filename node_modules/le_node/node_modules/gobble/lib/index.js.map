{"version":3,"file":"index.js","sources":["../../src/index.js"],"sourcesContent":["import { resolve } from 'path';\nimport { Merger, Source } from './nodes';\nimport * as sander from 'sander';\nimport config from './config';\nimport { cyan } from 'chalk';\nimport { isArray, isString } from './utils/is';\n\nfunction fail () {\n\tthrow new Error( `could not process input. Usage:\n    node2 = gobble(node1)\n    node = gobble('some/dir')\n    node = gobble([node1, node2[, nodeN]) (inputs can also be strings)\n    See ${cyan( 'https://github.com/gobblejs/gobble/wiki' )} for more info.` );\n}\n\nlet sources = {};\n\nfunction getNode ( input, options ) {\n\tif ( input._gobble ) {\n\t\treturn input;\n\t}\n\n\tif ( isArray( input ) ) {\n\t\tinput = input.map( ensureNode );\n\t\treturn new Merger( input, options );\n\t}\n\n\tif ( isString( input ) ) {\n\t\tinput = resolve( config.cwd, input );\n\t\treturn sources[ input ] || ( sources[ input ] = new Source( input, options ) );\n\t}\n\n\tfail();\n}\n\nfunction ensureNode ( input ) {\n\treturn getNode( input );\n}\n\nfunction gobble ( input, options ) {\n\t// gobble takes 1 or two arguments. The second must be an options object\n\tif ( arguments.length > 2 || options && ( typeof options !== 'object' || options._gobble ) ) {\n\t\tfail();\n\t}\n\n\treturn getNode( input, options );\n}\n\ngobble.env = function ( env ) {\n\tif ( arguments.length ) {\n\t\tconfig.env = env;\n\t}\n\n\treturn config.env;\n};\n\ngobble.cwd = function () {\n\tif ( arguments.length ) {\n\t\tconfig.cwd = resolve.apply( null, arguments );\n\t}\n\n\treturn config.cwd;\n};\n\ngobble.sander = sander;\n\nexport default gobble;\n"],"names":[],"mappings":"AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOA,SAAS,OAAQ;AAChB,CAAD,MAAO,IAAI,MAAX,gLARA,UAYc,CAAE,6CAJhB;AAKA;;AAEA,IAAI,UAAU;;AAEd,SAAS,QAAU,OAAO,SAAU;AACnC,CAAD,IAAM,MAAM,SAAU;AACpB,EAAF,OAAS;AACT;;AAEC,CAAD,IAtBA,UAsBa,CAAE,QAAU;AACvB,EAAF,QAAU,MAAM,IAAK;AACnB,EAAF,OAAS,IAxBT,YAwBmB,CAAE,OAAO;AAC5B;;AAEC,CAAD,IA3BA,WA2Bc,CAAE,QAAU;AACxB,EAAF,QA5BA,YA4BiB,CA5BjB,iBA4ByB,CAAC,KAAK;AAC7B,EAAF,OAAS,QAAS,WAAa,QAAS,SAAU,IA7BlD,YA6B4D,CAAE,OAAO;AACrE;;AAEC,CAAD;AACA;;AAEA,SAAS,WAAa,OAAQ;AAC7B,CAAD,OAAQ,QAAS;AACjB;;AAEA,SAAS,OAAS,OAAO,SAAU;;AAElC,CAAD,IAAM,UAAU,SAAS,KAAK,YAAa,OAAO,YAAY,YAAY,QAAQ,UAAY;AAC5F,EAAF;AACA;;AAEC,CAAD,OAAQ,QAAS,OAAO;AACxB;;AAEA,OAAO,MAAM,UAAW,KAAM;AAC7B,CAAD,IAAM,UAAU,QAAS;AACvB,EAlDF,iBAkDQ,CAAC,MAAM;AACf;;AAEC,CAAD,OArDA,iBAqDc,CAAC;AACf;;AAEA,OAAO,MAAM,YAAY;AACxB,CAAD,IAAM,UAAU,QAAS;AACvB,EA1DF,iBA0DQ,CAAC,MA1DT,YA0DsB,CAAC,MAAO,MAAM;AACpC;;AAEC,CAAD,OA7DA,iBA6Dc,CAAC;AACf;;AAEA,OAAO,SAAS;;AAhEhB,qBAkEe"}